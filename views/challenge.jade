.page-challenge: .page-width

    .workspace-header(ng-class='(animationClass || "") + (completed ? " success" : "")')

        .inner.center(ng-if='!started')

            h3 Challenge {{ id }}: {{ challenges[ id - 1 ].title }}
            h4 {{ challenges[ id - 1 ].description }}
            button.button-success(ng-click='start()') Start

        .inner(ng-if='started && !completed')

            a.button.button-hint.large.right(
                ng-click='toggleSolution()',
                ng-class='{ active: showSolution, "animate-pulse-highlight": highlightHelp }'
                )
                i.icon-hint
                | Hint

            progress-circle(value='step', max='content.steps.length')
            h3 {{ challenges[ id - 1 ].title }}
            h4.hint(ng-bind-html='hint | markdown', ng-if='hint')

        .inner.center(ng-if='completed')
            h4 {{ successMessage() }}
            a.button.button-success(ng-if='hasNext', ng-href='/challenge/{{id + 1}}') Next &rsaquo;
            a.button.button-success(ng-if='!hasNext', ng-click='openFinishedGame()') Done &rsaquo;

    .row(ng-if='started')
        .col-6.editor-wrap

            editor(
                workspace,
                ng-model='challenge.code',
                ng-class='{ completed: completed }',
                ng-change='validate()',
                editable='started',
                start-at-line='content.startAt'
                tabbed='true',
                controls='true'
                )

        .col-6.tutorial-wrap

            display(
                source='challenge.code',
                workspace,
                mode='"challenge"',
                sharing='completed',
                ng-class='{ disabled: !started }',
                ng-show='!showSolution'
                )

            editor.solution(
                ng-if='showSolution && solution',
                ng-model='solution',
                title='"Solution"'
                ) {{ solution }}

    .modal-overlay(ng-if='gameCompleteOpen')
        .modal-inner.split-modal.challenge-complete.center

            button.close(ng-click='clocseFinishedGame()'): i.icon-cross

            h3 Congratulations

            h4 You've completed

            .logo-title

            .center.bottom-section
                a.button.large(ng-href='/playground')
                    i.icon-game
                    |  Playground
